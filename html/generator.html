<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>generator</title>
</head>
<body>

<script type="text/javascript">
  function* fib(max) {
    var
      t,
      a = 0,
      b = 1,
      n = 0;
    while (n < max) {
      yield a;
      [a, b] = [b, a + b];
      n ++;
    }
    return;
  }

  var f = fib(5);
  console.log(f.next()); // {value: 0, done: false}
  console.log(f.next());// {value: 1, done: false}
  f.next(); // {value: 1, done: false}
  f.next(); // {value: 2, done: false}
  f.next(); // {value: 3, done: false}
  f.next(); // {value: undefined, done: true}

  for (var x of fib(10)) {
    console.log(x); // 依次输出0, 1, 1, 2, 3, ...
  }


  // 要生成一个自增的ID，可以编写一个next_id()函数：
  function* next_id() {
    var current_id = 0;
    while(true){
      current_id++;
      yield current_id;
    }
  }
</script>
</body>
</html>
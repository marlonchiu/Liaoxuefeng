# 廖雪峰的JavaScript教程

在线教程地址：[JavaScript教程](https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000)

## 函数
### 函数的定义和调用 

### 变量作用域与解构赋值
* 在一个方法内部，this是一个特殊变量，它始终指向当前对象。
* 在非strict模式下，this重新指向全局对象window。
* 在strict模式下让函数的this指向undefined。

```javascript
'use strict';

var xiaoming = {
    name: '小明',
    birth: 1990,
    age: function () {
        var y = new Date().getFullYear();
        return y - this.birth;
    }
};

var fn = xiaoming.age;
fn(); // Uncaught TypeError: Cannot read property 'birth' of undefined


// 修正方法  用that变量首先捕获this
'use strict';

var xiaoming2 = {
  name: '小明',
  birth: 1990,
  age: function () {
    var that = this; // 在方法内部一开始就捕获this
    function getAgeFromBirth() {
      var y = new Date().getFullYear();
      return y - that.birth; // 用that而不是this
    }
    return getAgeFromBirth();
  }
};

console.log(xiaoming2.age()); // 28
```


* 修改this的指向
   * `apply(obj, [])` : 要指定函数的this指向哪个对象，可以用函数本身的apply方法，
   它接收两个参数，第一个参数就是需要绑定的this变量，第二个参数是Array，表示函数本身的参数。
   
   ```javascript
    function getAge() {
        var y = new Date().getFullYear();
        return y - this.birth;
    }
    
    var xiaoming = {
        name: '小明',
        birth: 1990,
        age: getAge
    };
    
    xiaoming.age(); // 25
    getAge.apply(xiaoming, []); // 28, this指向xiaoming, 参数为空
    ```
  
   * `call`：与apply类似，唯一区别：call()是把把参数按顺序传入
     对普通函数调用，我们通常把this绑定为null
     
    ```javascript
    'use strict';
    
    var count = 0;
    var oldParseInt = parseInt; // 保存原函数
    
    window.parseInt = function () {
      count += 1;
      return oldParseInt.apply(null, arguments); // 调用原函数
    };
  
    // 测试:
    parseInt('10');
    parseInt('20');
    parseInt('30');
    console.log('count = ' + count); // 3
    ``` 
    
### 函数的方法